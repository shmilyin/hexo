{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"themes/yilia/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/blank.gif","path":"fancybox/blank.gif","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/fancybox_loading@2x.gif","path":"fancybox/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/fancybox_loading.gif","path":"fancybox/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/fancybox_overlay.png","path":"fancybox/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/fancybox_sprite.png","path":"fancybox/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/fancybox_sprite@2x.png","path":"fancybox/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/jquery.fancybox.css","path":"fancybox/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/jquery.fancybox.js","path":"fancybox/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/jquery.fancybox.pack.js","path":"fancybox/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/coderwall.png","path":"img/coderwall.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/delicious.png","path":"img/delicious.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/douban.png","path":"img/douban.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/facebook.png","path":"img/facebook.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/github.png","path":"img/github.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/google.png","path":"img/google.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/img-err.png","path":"img/img-err.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/linkedin.png","path":"img/linkedin.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/img-loading.png","path":"img/img-loading.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/mail.png","path":"img/mail.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/pinboard.png","path":"img/pinboard.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/pinterest.png","path":"img/pinterest.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/rss.png","path":"img/rss.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/stackoverflow.png","path":"img/stackoverflow.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/twitter.png","path":"img/twitter.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/weibo.png","path":"img/weibo.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/zhihu.png","path":"img/zhihu.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/js/instagram.js","path":"js/instagram.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/js/jquery.lazyload.js","path":"js/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/js/mobile.js","path":"js/mobile.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/js/pc.js","path":"js/pc.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/css/fonts/fontawesome-webfont.eot","path":"css/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/yilia/source/css/fonts/fontawesome-webfont.svgz","path":"css/fonts/fontawesome-webfont.svgz","modified":0,"renderable":1},{"_id":"themes/yilia/source/css/fonts/fontawesome-webfont.ttf","path":"css/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/yilia/source/css/fonts/fontawesome-webfont.woff","path":"css/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/helpers/fancybox_buttons.png","path":"fancybox/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/helpers/jquery.fancybox-buttons.css","path":"fancybox/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/helpers/jquery.fancybox-buttons.js","path":"fancybox/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/helpers/jquery.fancybox-media.js","path":"fancybox/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/helpers/jquery.fancybox-thumbs.css","path":"fancybox/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/yilia/source/fancybox/helpers/jquery.fancybox-thumbs.js","path":"fancybox/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/css/fonts/fontawesome-webfont.svg","path":"css/fonts/fontawesome-webfont.svg","modified":0,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"0abbf725d013570469c5b47d73c9236e9cacb670","modified":1496195456794},{"_id":"themes/yilia/.gitignore","hash":"7d65523f2a5afb69d76824dd1dfa62a34faa3197","modified":1496195458962},{"_id":"themes/yilia/README.md","hash":"8648a81b3ae08a4accd6b0541533e662511e6400","modified":1496195458968},{"_id":"themes/yilia/_config.yml","hash":"ab1857f39d25c318129c29e7eec9c5af5ca2487d","modified":1496196291843},{"_id":"themes/yilia/package.json","hash":"00357ef6f24eb049074da81809e98f973f528cca","modified":1496195459176},{"_id":"source/_posts/PandoraBox_ChinaDNS_Shadowsocks fuck_gfw.md","hash":"13965aa7d8e2cfaec099e346301bea8afc0005d5","modified":1496195456798},{"_id":"source/_posts/gitlab_update_notes.md","hash":"59e68f9b82eee2142241c366a86ed3b00a9841ba","modified":1496195456806},{"_id":"source/about/index.md","hash":"c14ffddac9a9cfe592e0801f009fe5771dfdfd2a","modified":1496195456809},{"_id":"source/categories/index.md","hash":"0502d74d0c62add87541cc327aea9c78ca911c3e","modified":1496195456813},{"_id":"source/tags/index.md","hash":"a248f366f795bbd623da6105282911c254c179cc","modified":1496195456817},{"_id":"themes/yilia/languages/de.yml","hash":"ecb13af8af81ccc033ae7494cb2f94f84f6466ad","modified":1496195458979},{"_id":"themes/yilia/languages/default.yml","hash":"9e59cd11b290be84909612beb12d0f93ce737f53","modified":1496195458983},{"_id":"themes/yilia/languages/en.yml","hash":"8fa0a7482188ca56fd3cf19c4a87320f85a76846","modified":1496195458987},{"_id":"themes/yilia/languages/fr-FR.yml","hash":"12cfa96dc412ecb6f8bf4de2690575929464906e","modified":1496195458990},{"_id":"themes/yilia/languages/ru.yml","hash":"9997425292031ee8a58a93346ac6d3f38f18e566","modified":1496195458994},{"_id":"themes/yilia/languages/zh-Hans.yml","hash":"0d7e8da60fd5e5db217e1733ac273ae00fd752ea","modified":1496195458997},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"9e4034870b57d2bb3063c91f8d206a6c4d7b3789","modified":1496195459005},{"_id":"themes/yilia/languages/zh-hk.yml","hash":"606dfb34d3fec1d7895a654ff7a5a1de0c6a5c55","modified":1496195459002},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1496195459157},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1496195459158},{"_id":"themes/yilia/layout/index.ejs","hash":"aa1b4456907bdb43e629be3931547e2d29ac58c8","modified":1496195459159},{"_id":"themes/yilia/layout/layout.ejs","hash":"4a5566f704f3246f5ef77badddf18d2e16750328","modified":1496195459167},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1496195459171},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1496195459172},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1496195459173},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"8bbd5650f0023380476b2f8b70f2fba15c089a7f","modified":1496195459018},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"8dfb6d68aa8a0661d26c32ce1ce1f45815364c3a","modified":1496195459022},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a6e94061ac55b9eb55275f87b608d62f6ea35659","modified":1496195459037},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"d6306cd897683c25184a50b29931aa1fa18d119c","modified":1496195459065},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"17f35939848afa84d0c7e3f730d261cc09a6b8b6","modified":1496195459069},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1496195459079},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"f7068535c0df7e7bc6614a046e7d4b262a65d8b2","modified":1496195459092},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"6387a93dad7c3d778eb91e3821852fbf6813880c","modified":1496195459097},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"47dc7c1d35928a7b026c683547f8482d2e524c63","modified":1496195459105},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"cdfd21f079933f3a275bc4088e1ca5e6068e75b4","modified":1496195459113},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"fff29e619af2b1abcab7d5d2d6f78428272f18f7","modified":1496195459117},{"_id":"themes/yilia/source/css/.DS_Store","hash":"fc5a428fe40854a0ba66b4cea196c6700a57cae7","modified":1496195459181},{"_id":"themes/yilia/source/css/_extend.styl","hash":"8ab1ad313bd6707d248c5ca1ee9a5eab8d815e42","modified":1496195459185},{"_id":"themes/yilia/source/css/_variables.styl","hash":"8b63ea3c7199524b9a1541075c6f8fb2c0d0ea3d","modified":1496195459259},{"_id":"themes/yilia/source/css/style.styl","hash":"fb591be51e4e4f55db117159c84ecba4f7248f61","modified":1496195459290},{"_id":"themes/yilia/source/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1496195459291},{"_id":"themes/yilia/source/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1496195459294},{"_id":"themes/yilia/source/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1496195459292},{"_id":"themes/yilia/source/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1496195459295},{"_id":"themes/yilia/source/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1496195459296},{"_id":"themes/yilia/source/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1496195459298},{"_id":"themes/yilia/source/fancybox/jquery.fancybox.css","hash":"b6aa6692c2e5f8bd74d96827b78570f0c5683c20","modified":1496195459308},{"_id":"themes/yilia/source/fancybox/jquery.fancybox.js","hash":"a82597493d75ea989ca586e09173cff332efe41e","modified":1496195459322},{"_id":"themes/yilia/source/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1496195459337},{"_id":"themes/yilia/source/img/coderwall.png","hash":"fa84676c4d654e040e51fd34bfcd9f9348cd5331","modified":1496195459338},{"_id":"themes/yilia/source/img/delicious.png","hash":"9553a5f5189e4a953e04a58a49dbfa74b86b73dd","modified":1496195459339},{"_id":"themes/yilia/source/img/douban.png","hash":"e2ade003ffadd5826ee66ec23901c2d6e8607e4e","modified":1496195459340},{"_id":"themes/yilia/source/img/facebook.png","hash":"d19ad7a0903daf26817afd8753cd97e0cc714f54","modified":1496195459342},{"_id":"themes/yilia/source/img/github.png","hash":"b84d03b32fa388dcbf149296ebd16dce6223d48d","modified":1496195459343},{"_id":"themes/yilia/source/img/google.png","hash":"61a21fec7346fa3400b747ac9a201cf3d5bc013d","modified":1496195459344},{"_id":"themes/yilia/source/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1496195459345},{"_id":"themes/yilia/source/img/linkedin.png","hash":"e203138fb53c257cb214e97f4e30091b9c568d2c","modified":1496195459347},{"_id":"themes/yilia/source/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1496195459346},{"_id":"themes/yilia/source/img/mail.png","hash":"fca8199cc77fdbd700a45bf56d091c82f4a67fe7","modified":1496195459348},{"_id":"themes/yilia/source/img/pinboard.png","hash":"0891fbb6d092fa012bf936019923383d84c6aeb0","modified":1496195459350},{"_id":"themes/yilia/source/img/pinterest.png","hash":"9c72917f8779c083157c6ce7a5d62ed4874f0630","modified":1496195459351},{"_id":"themes/yilia/source/img/rss.png","hash":"430fd47340e75214c081abd05cd7410cf7c71b86","modified":1496195459352},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1496195459353},{"_id":"themes/yilia/source/img/stackoverflow.png","hash":"da5dfe9043055c95e479d49c78cd3b020de608f2","modified":1496195459354},{"_id":"themes/yilia/source/img/twitter.png","hash":"14dbb8e62d056525253bc0de13acd1723da7a934","modified":1496195459355},{"_id":"themes/yilia/source/img/weibo.png","hash":"280dae3fd38086158b4a1b57edb94c06b1a5014b","modified":1496195459356},{"_id":"themes/yilia/source/img/zhihu.png","hash":"a6d6ef65e9ac82e613a311810391ebb90d9b1c1d","modified":1496195459357},{"_id":"themes/yilia/source/js/instagram.js","hash":"81e13cacf4947118ed1920e59b04ccf6beef6b86","modified":1496195459373},{"_id":"themes/yilia/source/js/jquery.lazyload.js","hash":"c11a2e7b330d16d06feabd0a8477099adf9d6799","modified":1496195459382},{"_id":"themes/yilia/source/js/main.js","hash":"e2633f282e377a4169649c9f17dc96036ad4fc64","modified":1496195459392},{"_id":"themes/yilia/source/js/mobile.js","hash":"b68cc01d24e80973c48205f551da87f3f3427644","modified":1496195459393},{"_id":"themes/yilia/source/js/pc.js","hash":"a5397d34a04084ee089b4b1e26457ab46ecea63e","modified":1496195459403},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"d4f0e36f9a2167e91082dbd7d52425a06d2bebbf","modified":1496195459123},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"c0c988334e857a77ba455a056dfa21809e7e76a5","modified":1496195459126},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"e8399025ed3b980aedb821c92855889f5f12fd5b","modified":1496195459134},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"d19dee2082528e1844bed3aa4e4bd59f15fd7a7a","modified":1496195459138},{"_id":"themes/yilia/layout/_partial/post/share_addthis.ejs","hash":"0ac35bd92e58983c189ac0c35df404ebc6ee826e","modified":1496195459142},{"_id":"themes/yilia/layout/_partial/post/share_jia.ejs","hash":"5f964172bfe3992b9c69d5a023179613aec1afd3","modified":1496195459146},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"78612cfc091d7d861a70455a0dc8c3036e460879","modified":1496195459153},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1496195459156},{"_id":"themes/yilia/source/css/_partial/article.styl","hash":"872fc4e63509fef885c939e5fd70e6ed439beced","modified":1496195459193},{"_id":"themes/yilia/source/css/_partial/archive.styl","hash":"8b349f1605024dcdae054e04f02d71a2e84957c2","modified":1496195459189},{"_id":"themes/yilia/source/css/_partial/footer.styl","hash":"7ca837a4cc34db1c35f01baec85eb10ccc64ea86","modified":1496195459196},{"_id":"themes/yilia/source/css/_partial/header.styl","hash":"67e59feb18eee6026717cb440d86ab9551782628","modified":1496195459201},{"_id":"themes/yilia/source/css/_partial/instagram.styl","hash":"8a7b07bf5ea2d3588c0019f722c245bb1a8696af","modified":1496195459210},{"_id":"themes/yilia/source/css/_partial/highlight.styl","hash":"08d3205dde3235f3e6881126268e6c473f46a8ac","modified":1496195459206},{"_id":"themes/yilia/source/css/_partial/mobile-slider.styl","hash":"e19c7fae6968ad3ea6cfc110900a991f9b5fce31","modified":1496195459218},{"_id":"themes/yilia/source/css/_partial/main.styl","hash":"c368f1533053d4cffdf0ad982603271400b08e33","modified":1496195459214},{"_id":"themes/yilia/source/css/_partial/page.styl","hash":"720b5b169bc28ccba3794efce9b7cd39f243dec7","modified":1496195459225},{"_id":"themes/yilia/source/css/_partial/mobile.styl","hash":"3a03b04ef8ac305aa5dbf7b9db99cd9377d07383","modified":1496195459222},{"_id":"themes/yilia/source/css/_partial/scroll.styl","hash":"5539a38f9acd603d453a0ea0d8ce10893cf83d22","modified":1496195459229},{"_id":"themes/yilia/source/css/_partial/share.styl","hash":"22697b9a9877ab9f018364feb57aeea4a8313c9a","modified":1496195459233},{"_id":"themes/yilia/source/css/_partial/tagcloud.styl","hash":"af0115de5c6455f899a2e09225b50224982c039d","modified":1496195459237},{"_id":"themes/yilia/source/css/_partial/wheelmenu.styl","hash":"74630c56944e27bef53ef0c0e391611a2eec2ed0","modified":1496195459241},{"_id":"themes/yilia/source/css/_util/mixin.styl","hash":"429bad87fc156eacf226c5e35b0eafc277f2504b","modified":1496195459253},{"_id":"themes/yilia/source/css/_util/grid.styl","hash":"1aa883ab432d9e4139c89dcbd40ae2bd1528d029","modified":1496195459248},{"_id":"themes/yilia/source/css/fonts/fontawesome-webfont.eot","hash":"3ce87b82c7a4ffdf65e96765c2ffda10b1a283c6","modified":1496195459266},{"_id":"themes/yilia/source/css/fonts/fontawesome-webfont.svgz","hash":"4bfdd33ed702e32ae01399fcc2652377f78e7626","modified":1496195459276},{"_id":"themes/yilia/source/css/fonts/fontawesome-webfont.ttf","hash":"1480b8101b02da9bc4c60341b5e185e63e585064","modified":1496195459281},{"_id":"themes/yilia/source/css/fonts/fontawesome-webfont.woff","hash":"cafc4ac5761a0a252d33dce4ea3952cf9a38d832","modified":1496195459286},{"_id":"themes/yilia/source/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1496195459299},{"_id":"themes/yilia/source/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1496195459300},{"_id":"themes/yilia/source/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1496195459302},{"_id":"themes/yilia/source/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1496195459303},{"_id":"themes/yilia/source/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1496195459304},{"_id":"themes/yilia/source/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1496195459305},{"_id":"themes/yilia/source/css/fonts/fontawesome-webfont.svg","hash":"ba13657479b46daecb6336bfe376f84cef3ae58b","modified":1496195459272},{"_id":"public/about/index.html","hash":"1bd43c8509dcad28a6835853254e917d05968f99","modified":1496196004019},{"_id":"public/categories/index.html","hash":"33e00b46d08acdc9cbd6e8a8fdb0b58a4f26c121","modified":1496196004019},{"_id":"public/tags/index.html","hash":"96c552774b1fd2dd6667692cf74df7ed8e087bbc","modified":1496196004020},{"_id":"public/2016/04/07/PandoraBox_ChinaDNS_Shadowsocks fuck_gfw/index.html","hash":"f01abd31e231ef8ac6d69a30b637c267a94862b2","modified":1496196004020},{"_id":"public/archives/index.html","hash":"284749873e240679ccf53b0bf59bd4ae7b9fc325","modified":1496196004020},{"_id":"public/archives/2016/index.html","hash":"8baa110d580dd1ba046778dd884db09e185e43b4","modified":1496196004020},{"_id":"public/archives/2016/03/index.html","hash":"619103bcde920910693e02274fde64760de238ee","modified":1496196004020},{"_id":"public/archives/2016/04/index.html","hash":"759b748053f3f485440208721afd6a15a4cf62fb","modified":1496196004020},{"_id":"public/categories/notes/index.html","hash":"a1b3cfdc2cb04af7c409ff68343fa143089562c7","modified":1496196004020},{"_id":"public/index.html","hash":"f06d28bda09225f568c7385addebf7d9325eda1b","modified":1496196004020},{"_id":"public/tags/Fuck-GFW/index.html","hash":"05438c8d750997e4783ca407f356e9b793d141a3","modified":1496196004020},{"_id":"public/tags/shadowsocks/index.html","hash":"a9fcaff018423ddab8c2e5e38584082877fab957","modified":1496196004021},{"_id":"public/tags/openwrt/index.html","hash":"ce8f9f625590a221a11bd0e03a310833cbdff8cf","modified":1496196004021},{"_id":"public/tags/pandorabox/index.html","hash":"fe25368996e53b696821bf8d68b3b5d71fc71018","modified":1496196004021},{"_id":"public/tags/Gitlab/index.html","hash":"c816a0325cc95eebadb4f17e54d8f214ee576da1","modified":1496196004021},{"_id":"public/2016/03/29/gitlab_update_notes/index.html","hash":"47663665d23eac0d15d855a919a4dbdf6abe9482","modified":1496196004021},{"_id":"public/CNAME","hash":"0abbf725d013570469c5b47d73c9236e9cacb670","modified":1496196004034},{"_id":"public/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1496196004034},{"_id":"public/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1496196004034},{"_id":"public/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1496196004034},{"_id":"public/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1496196004034},{"_id":"public/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1496196004034},{"_id":"public/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1496196004034},{"_id":"public/img/coderwall.png","hash":"fa84676c4d654e040e51fd34bfcd9f9348cd5331","modified":1496196004034},{"_id":"public/img/delicious.png","hash":"9553a5f5189e4a953e04a58a49dbfa74b86b73dd","modified":1496196004034},{"_id":"public/img/douban.png","hash":"e2ade003ffadd5826ee66ec23901c2d6e8607e4e","modified":1496196004034},{"_id":"public/img/facebook.png","hash":"d19ad7a0903daf26817afd8753cd97e0cc714f54","modified":1496196004034},{"_id":"public/img/github.png","hash":"b84d03b32fa388dcbf149296ebd16dce6223d48d","modified":1496196004034},{"_id":"public/img/google.png","hash":"61a21fec7346fa3400b747ac9a201cf3d5bc013d","modified":1496196004034},{"_id":"public/img/img-err.png","hash":"23a63ea26eb3c1d5e677d9883cf36cc1a1a1228b","modified":1496196004034},{"_id":"public/img/linkedin.png","hash":"e203138fb53c257cb214e97f4e30091b9c568d2c","modified":1496196004034},{"_id":"public/img/img-loading.png","hash":"a9cd5cd11866824f31e3d1c5e23badfeb3f73031","modified":1496196004034},{"_id":"public/img/mail.png","hash":"fca8199cc77fdbd700a45bf56d091c82f4a67fe7","modified":1496196004034},{"_id":"public/img/pinboard.png","hash":"0891fbb6d092fa012bf936019923383d84c6aeb0","modified":1496196004034},{"_id":"public/img/pinterest.png","hash":"9c72917f8779c083157c6ce7a5d62ed4874f0630","modified":1496196004034},{"_id":"public/img/rss.png","hash":"430fd47340e75214c081abd05cd7410cf7c71b86","modified":1496196004034},{"_id":"public/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1496196004034},{"_id":"public/img/stackoverflow.png","hash":"da5dfe9043055c95e479d49c78cd3b020de608f2","modified":1496196004034},{"_id":"public/img/twitter.png","hash":"14dbb8e62d056525253bc0de13acd1723da7a934","modified":1496196004034},{"_id":"public/img/weibo.png","hash":"280dae3fd38086158b4a1b57edb94c06b1a5014b","modified":1496196004034},{"_id":"public/img/zhihu.png","hash":"a6d6ef65e9ac82e613a311810391ebb90d9b1c1d","modified":1496196004034},{"_id":"public/css/fonts/fontawesome-webfont.eot","hash":"3ce87b82c7a4ffdf65e96765c2ffda10b1a283c6","modified":1496196004034},{"_id":"public/css/fonts/fontawesome-webfont.svgz","hash":"4bfdd33ed702e32ae01399fcc2652377f78e7626","modified":1496196004034},{"_id":"public/css/fonts/fontawesome-webfont.ttf","hash":"1480b8101b02da9bc4c60341b5e185e63e585064","modified":1496196004034},{"_id":"public/css/fonts/fontawesome-webfont.woff","hash":"cafc4ac5761a0a252d33dce4ea3952cf9a38d832","modified":1496196004034},{"_id":"public/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1496196004034},{"_id":"public/css/fonts/fontawesome-webfont.svg","hash":"ba13657479b46daecb6336bfe376f84cef3ae58b","modified":1496196004926},{"_id":"public/fancybox/jquery.fancybox.css","hash":"b6aa6692c2e5f8bd74d96827b78570f0c5683c20","modified":1496196004934},{"_id":"public/js/instagram.js","hash":"f19adbcc0dac33536bc6660598059048ec901882","modified":1496196004935},{"_id":"public/js/jquery.lazyload.js","hash":"c11a2e7b330d16d06feabd0a8477099adf9d6799","modified":1496196004935},{"_id":"public/js/main.js","hash":"0640b68a76fab3c693b3cd1e4d04d14be1e53940","modified":1496196004935},{"_id":"public/js/mobile.js","hash":"b68cc01d24e80973c48205f551da87f3f3427644","modified":1496196004935},{"_id":"public/js/pc.js","hash":"fdbc039fc9ffa70815b5fc4daaa587ae29693f10","modified":1496196004935},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1496196004935},{"_id":"public/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1496196004935},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1496196004935},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1496196004935},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1496196004935},{"_id":"public/css/style.css","hash":"5151ff085d4031c3ce5d043148e723427c608ac5","modified":1496196004936},{"_id":"public/fancybox/jquery.fancybox.js","hash":"a82597493d75ea989ca586e09173cff332efe41e","modified":1496196004936},{"_id":"public/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1496196004936}],"Category":[{"name":"notes","_id":"cj3ccgw9w00046sv5g4cg5rze"}],"Data":[],"Page":[{"title":"关于我","date":"2015-10-28T06:48:17.000Z","_content":"关于我","source":"about/index.md","raw":"title: 关于我\ndate: 2015-10-28 15:48:17\n---\n关于我","updated":"2017-05-31T01:50:56.809Z","path":"about/index.html","comments":1,"layout":"page","_id":"cj3ccgw9f00016sv5ije5uxjh","content":"<p>关于我</p>\n","site":{"data":{}},"excerpt":"","more":"<p>关于我</p>\n"},{"layout":"categories","title":"categories","_content":"","source":"categories/index.md","raw":"layout: categories\ntitle: categories\n---","date":"2017-05-31T01:50:56.813Z","updated":"2017-05-31T01:50:56.813Z","path":"categories/index.html","comments":1,"_id":"cj3ccgw9k00036sv5h3s2m6p0","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"tags","title":"tags","_content":"","source":"tags/index.md","raw":"layout: tags\ntitle: tags\n---","date":"2017-05-31T01:50:56.817Z","updated":"2017-05-31T01:50:56.817Z","path":"tags/index.html","comments":1,"_id":"cj3ccgwa500066sv5qdywofiv","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"PandoraBox 配合ChinaDNS,Shadowsocks实现智能翻墙","date":"2016-04-07T12:00:00.000Z","_content":"\n>必备:\n>openwrt或者PandoraBox路由器一个（推荐PandoraBox，内置Shadwosocks,ChinaDNS）,\n>Shadowsocks账号\n>刷路由器在这里就不写了，google一大堆教程\n\nPandoraBox系统内置Shadwosocks,ChinaDNS等服务，十分方便，如果是openwrt系统要自己安装\n\n### 1. 解决dns污染的问题\n打开 `服务`>`ChinaDNS`\n\n<!--more-->\n\n![ChinaDNS设置](https://i.imgur.com/ucERfzT.png)\n\n>之前就是这里设置错了没在意看，到时只能上去Google，却上不去Youtube,Facebook等（Google还没被DNS污染之前，现在已经加入DNS污染全家桶了）。\n\n### 2. 设置Shadowsocks\n\n打开 `服务`>`Shadowsocks`\n\n![Shadowsocks设置](https://i.imgur.com/L3NtI5g.png)\n\n>填好配置文件，勾选透明代理一项，不要勾选Socks5代理。如果服务器支持UDP转发，可以勾选UDP转发一项，保存\n\n### 3. 设置DNS转发\n\n打开 `网络`>`DHCP/DNS`\n\n![DNS设置](https://i.imgur.com/kuPmS1o.png)\n\n把DNS转发一项设置为127.0.0.1#1053(1053是第一步里面ChinaDNS设置的端口)\n\n打开 `网络`>`DHCP/DNS`>`HOSTS和解析文件`选项卡,勾选`忽略解析文件一项 `\n\n保存即可。\n\n","source":"_posts/PandoraBox_ChinaDNS_Shadowsocks fuck_gfw.md","raw":"# PandoraBox 配合ChinaDNS,Shadowsocks实现智能翻墙\ntitle: PandoraBox 配合ChinaDNS,Shadowsocks实现智能翻墙\ndate: 2016-04-07 21:00\ncategories:\n- notes\ntags:\n- Fuck GFW\n- shadowsocks\n- openwrt\n- pandorabox\n------\n\n>必备:\n>openwrt或者PandoraBox路由器一个（推荐PandoraBox，内置Shadwosocks,ChinaDNS）,\n>Shadowsocks账号\n>刷路由器在这里就不写了，google一大堆教程\n\nPandoraBox系统内置Shadwosocks,ChinaDNS等服务，十分方便，如果是openwrt系统要自己安装\n\n### 1. 解决dns污染的问题\n打开 `服务`>`ChinaDNS`\n\n<!--more-->\n\n![ChinaDNS设置](https://i.imgur.com/ucERfzT.png)\n\n>之前就是这里设置错了没在意看，到时只能上去Google，却上不去Youtube,Facebook等（Google还没被DNS污染之前，现在已经加入DNS污染全家桶了）。\n\n### 2. 设置Shadowsocks\n\n打开 `服务`>`Shadowsocks`\n\n![Shadowsocks设置](https://i.imgur.com/L3NtI5g.png)\n\n>填好配置文件，勾选透明代理一项，不要勾选Socks5代理。如果服务器支持UDP转发，可以勾选UDP转发一项，保存\n\n### 3. 设置DNS转发\n\n打开 `网络`>`DHCP/DNS`\n\n![DNS设置](https://i.imgur.com/kuPmS1o.png)\n\n把DNS转发一项设置为127.0.0.1#1053(1053是第一步里面ChinaDNS设置的端口)\n\n打开 `网络`>`DHCP/DNS`>`HOSTS和解析文件`选项卡,勾选`忽略解析文件一项 `\n\n保存即可。\n\n","slug":"PandoraBox_ChinaDNS_Shadowsocks fuck_gfw","published":1,"updated":"2017-05-31T01:50:56.798Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3ccgw9700006sv5lh2qwuyq","content":"<blockquote>\n<p>必备:<br>openwrt或者PandoraBox路由器一个（推荐PandoraBox，内置Shadwosocks,ChinaDNS）,<br>Shadowsocks账号<br>刷路由器在这里就不写了，google一大堆教程</p>\n</blockquote>\n<p>PandoraBox系统内置Shadwosocks,ChinaDNS等服务，十分方便，如果是openwrt系统要自己安装</p>\n<h3 id=\"1-解决dns污染的问题\"><a href=\"#1-解决dns污染的问题\" class=\"headerlink\" title=\"1. 解决dns污染的问题\"></a>1. 解决dns污染的问题</h3><p>打开 <code>服务</code>&gt;<code>ChinaDNS</code></p>\n<a id=\"more\"></a>\n<p><img src=\"https://i.imgur.com/ucERfzT.png\" alt=\"ChinaDNS设置\"></p>\n<blockquote>\n<p>之前就是这里设置错了没在意看，到时只能上去Google，却上不去Youtube,Facebook等（Google还没被DNS污染之前，现在已经加入DNS污染全家桶了）。</p>\n</blockquote>\n<h3 id=\"2-设置Shadowsocks\"><a href=\"#2-设置Shadowsocks\" class=\"headerlink\" title=\"2. 设置Shadowsocks\"></a>2. 设置Shadowsocks</h3><p>打开 <code>服务</code>&gt;<code>Shadowsocks</code></p>\n<p><img src=\"https://i.imgur.com/L3NtI5g.png\" alt=\"Shadowsocks设置\"></p>\n<blockquote>\n<p>填好配置文件，勾选透明代理一项，不要勾选Socks5代理。如果服务器支持UDP转发，可以勾选UDP转发一项，保存</p>\n</blockquote>\n<h3 id=\"3-设置DNS转发\"><a href=\"#3-设置DNS转发\" class=\"headerlink\" title=\"3. 设置DNS转发\"></a>3. 设置DNS转发</h3><p>打开 <code>网络</code>&gt;<code>DHCP/DNS</code></p>\n<p><img src=\"https://i.imgur.com/kuPmS1o.png\" alt=\"DNS设置\"></p>\n<p>把DNS转发一项设置为127.0.0.1#1053(1053是第一步里面ChinaDNS设置的端口)</p>\n<p>打开 <code>网络</code>&gt;<code>DHCP/DNS</code>&gt;<code>HOSTS和解析文件</code>选项卡,勾选<code>忽略解析文件一项</code></p>\n<p>保存即可。</p>\n","site":{"data":{}},"excerpt":"<blockquote>\n<p>必备:<br>openwrt或者PandoraBox路由器一个（推荐PandoraBox，内置Shadwosocks,ChinaDNS）,<br>Shadowsocks账号<br>刷路由器在这里就不写了，google一大堆教程</p>\n</blockquote>\n<p>PandoraBox系统内置Shadwosocks,ChinaDNS等服务，十分方便，如果是openwrt系统要自己安装</p>\n<h3 id=\"1-解决dns污染的问题\"><a href=\"#1-解决dns污染的问题\" class=\"headerlink\" title=\"1. 解决dns污染的问题\"></a>1. 解决dns污染的问题</h3><p>打开 <code>服务</code>&gt;<code>ChinaDNS</code></p>","more":"<p><img src=\"https://i.imgur.com/ucERfzT.png\" alt=\"ChinaDNS设置\"></p>\n<blockquote>\n<p>之前就是这里设置错了没在意看，到时只能上去Google，却上不去Youtube,Facebook等（Google还没被DNS污染之前，现在已经加入DNS污染全家桶了）。</p>\n</blockquote>\n<h3 id=\"2-设置Shadowsocks\"><a href=\"#2-设置Shadowsocks\" class=\"headerlink\" title=\"2. 设置Shadowsocks\"></a>2. 设置Shadowsocks</h3><p>打开 <code>服务</code>&gt;<code>Shadowsocks</code></p>\n<p><img src=\"https://i.imgur.com/L3NtI5g.png\" alt=\"Shadowsocks设置\"></p>\n<blockquote>\n<p>填好配置文件，勾选透明代理一项，不要勾选Socks5代理。如果服务器支持UDP转发，可以勾选UDP转发一项，保存</p>\n</blockquote>\n<h3 id=\"3-设置DNS转发\"><a href=\"#3-设置DNS转发\" class=\"headerlink\" title=\"3. 设置DNS转发\"></a>3. 设置DNS转发</h3><p>打开 <code>网络</code>&gt;<code>DHCP/DNS</code></p>\n<p><img src=\"https://i.imgur.com/kuPmS1o.png\" alt=\"DNS设置\"></p>\n<p>把DNS转发一项设置为127.0.0.1#1053(1053是第一步里面ChinaDNS设置的端口)</p>\n<p>打开 <code>网络</code>&gt;<code>DHCP/DNS</code>&gt;<code>HOSTS和解析文件</code>选项卡,勾选<code>忽略解析文件一项</code></p>\n<p>保存即可。</p>"},{"title":"Gitlab 源码安装版 升级笔记","date":"2016-03-29T06:00:00.000Z","_content":"\n\n# Gitlab 升级笔记\n>适用于使用源码安装的Gitlab\n\n>GitLab Community Edition 8.3.2 fbb8b6e>\n\n#### 0. Backup\n```\ncd /home/git/gitlab\nsudo -u git -H bundle exec rake gitlab:backup:create RAILS_ENV=production\n```\n备份完成后会在`/home/git/gitlab/backup`文件夹下生成已时间戳命名的文件`1459217332_gitlab_backup.tar`\n\n#### 1. Stop server\n```\nsudo service gitlab stop\n```\n<!--more-->\n\n#### 2.Run GitLab upgrade tool\nPlease replace X.X.X with the [latest GitLab release](https://packages.gitlab.com/gitlab/gitlab-ce).\n\nGitLab 7.9 adds `nodejs` as a dependency. GitLab 7.6 adds `libkrb5-dev` as a dependency (installed by default on Ubuntu and OSX). GitLab 7.2 adds `pkg-config` and `cmake` as dependency. Please check the dependencies in the [installation guide](https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/install/installation.md#1-packages-dependencies).\n\n```\ncd /home/git/gitlab\nsudo -u git -H ruby -Ilib -e 'require \"gitlab/upgrader\"' -e 'class Gitlab::Upgrader' -e 'def latest_version_raw' -e '\"vX.X.X\"' -e 'end' -e 'end' -e 'Gitlab::Upgrader.new.execute'\n\n# to perform a non-interactive install (no user input required) you can add -y\n# sudo -u git -H ruby -Ilib -e 'require \"gitlab/upgrader\"' -e 'class Gitlab::Upgrader' -e 'def latest_version_raw' -e '\"vX.X.X\"' -e 'end' -e 'end' -e 'Gitlab::Upgrader.new.execute' -- -y\n```\n\n*小插曲：*执行命令时报错\n\n```\nfrom /home/git/gitlab/lib/gitlab/upgrader.rb:74:in `upgrade'\n\n    from /home/git/gitlab/lib/gitlab/upgrader.rb:22:in `execute'\n\n    from -e:7:in `<main>'\n```\n解决办法\n\n```\nOpen /home/git/gitlab/lib/gitlab/upgrader.rb in editor\nReplace all #{Gitlab.config.git.bin_path} by git and save\nRun upgrader.rb as usual\n```\n\n\nI have the same problem upgrading from 8.5.1 to 8.5.5. Replacing `Gitlab.config.git.bin_path` with `git` fixed it.\nThis is the search and replace command to run in vi: `%s/#{Gitlab.config.git.bin_path}/git/g`\n\n#### 3. Start application\n```\nsudo service gitlab start\nsudo service nginx restart\n```\n#### 4. Check application status\nCheck if GitLab and its dependencies are configured correctly:\n\n```\nsudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production\n```\nIf all items are green, then congratulations upgrade is complete!\n\n#### 5. Upgrade GitLab Shell\nGitLab Shell might be outdated, running the commands below ensures you're using a compatible version:\n\n```\ncd /home/git/gitlab-shell\nsudo -u git -H git fetch\nsudo -u git -H git checkout v`cat /home/git/gitlab/GITLAB_SHELL_VERSION`\n```\n#### One line upgrade command\n\nYou've read through the entire guide and probably already did all the steps one by one.\nBelow is a one line command with step 1 to 5 for the next time you upgrade.\nPlease replace X.X.X with the [latest GitLab release](https://packages.gitlab.com/gitlab/gitlab-ce).\n\n```\ncd /home/git/gitlab; \\\n  sudo -u git -H bundle exec rake gitlab:backup:create RAILS_ENV=production; \\\n  sudo service gitlab stop; \\\n  sudo -u git -H ruby -Ilib -e 'require \"gitlab/upgrader\"' -e 'class Gitlab::Upgrader' -e 'def latest_version_raw' -e '\"vX.X.X\"' -e 'end' -e 'end' -e 'Gitlab::Upgrader.new.execute' -- -y; \\\n  cd /home/git/gitlab-shell; \\\n  sudo -u git -H git fetch; \\\n  sudo -u git -H git checkout v`cat /home/git/gitlab/GITLAB_SHELL_VERSION`; \\\n  cd /home/git/gitlab; \\\n  sudo service gitlab start; \\\n  sudo service nginx restart; \\\n  sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production\n```\n####Note:\n阿里云服务器ruby源不稳定。换国内的源\n\n```\ngem sources --add https://ruby.taobao.org/ --remove https://rubygems.org/\ngem sources -l\n# 请确保只有 ruby.taobao.org\ngem install rails\n```\n\n```\nsudo -u git bundle install\n```\n\n安装完成之后 `update init script`\n\n```\nrm /etc/init.d/gitlab\nsudo cp lib/support/init.d/gitlab /etc/init.d/gitlab\n```\n\n升级是由于是从7.x 到8.x 样式变化很大，所以执行完后样式错乱。后来找了些文档才发现要重新生产asset文件。\n\n```\nsudo -u git -H bundle exec rake assets:clean assets:precompile cache:clear RAILS_ENV=production\n```\n重启\n\n```\nservice gitlab start\nservice nginx restart\n```\nDone!\n\n\n","source":"_posts/gitlab_update_notes.md","raw":"title: Gitlab 源码安装版 升级笔记\ndate: 2016-03-29 15:00\ncategories:\n- notes\ntags:\n- Gitlab\n---\n\n\n# Gitlab 升级笔记\n>适用于使用源码安装的Gitlab\n\n>GitLab Community Edition 8.3.2 fbb8b6e>\n\n#### 0. Backup\n```\ncd /home/git/gitlab\nsudo -u git -H bundle exec rake gitlab:backup:create RAILS_ENV=production\n```\n备份完成后会在`/home/git/gitlab/backup`文件夹下生成已时间戳命名的文件`1459217332_gitlab_backup.tar`\n\n#### 1. Stop server\n```\nsudo service gitlab stop\n```\n<!--more-->\n\n#### 2.Run GitLab upgrade tool\nPlease replace X.X.X with the [latest GitLab release](https://packages.gitlab.com/gitlab/gitlab-ce).\n\nGitLab 7.9 adds `nodejs` as a dependency. GitLab 7.6 adds `libkrb5-dev` as a dependency (installed by default on Ubuntu and OSX). GitLab 7.2 adds `pkg-config` and `cmake` as dependency. Please check the dependencies in the [installation guide](https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/install/installation.md#1-packages-dependencies).\n\n```\ncd /home/git/gitlab\nsudo -u git -H ruby -Ilib -e 'require \"gitlab/upgrader\"' -e 'class Gitlab::Upgrader' -e 'def latest_version_raw' -e '\"vX.X.X\"' -e 'end' -e 'end' -e 'Gitlab::Upgrader.new.execute'\n\n# to perform a non-interactive install (no user input required) you can add -y\n# sudo -u git -H ruby -Ilib -e 'require \"gitlab/upgrader\"' -e 'class Gitlab::Upgrader' -e 'def latest_version_raw' -e '\"vX.X.X\"' -e 'end' -e 'end' -e 'Gitlab::Upgrader.new.execute' -- -y\n```\n\n*小插曲：*执行命令时报错\n\n```\nfrom /home/git/gitlab/lib/gitlab/upgrader.rb:74:in `upgrade'\n\n    from /home/git/gitlab/lib/gitlab/upgrader.rb:22:in `execute'\n\n    from -e:7:in `<main>'\n```\n解决办法\n\n```\nOpen /home/git/gitlab/lib/gitlab/upgrader.rb in editor\nReplace all #{Gitlab.config.git.bin_path} by git and save\nRun upgrader.rb as usual\n```\n\n\nI have the same problem upgrading from 8.5.1 to 8.5.5. Replacing `Gitlab.config.git.bin_path` with `git` fixed it.\nThis is the search and replace command to run in vi: `%s/#{Gitlab.config.git.bin_path}/git/g`\n\n#### 3. Start application\n```\nsudo service gitlab start\nsudo service nginx restart\n```\n#### 4. Check application status\nCheck if GitLab and its dependencies are configured correctly:\n\n```\nsudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production\n```\nIf all items are green, then congratulations upgrade is complete!\n\n#### 5. Upgrade GitLab Shell\nGitLab Shell might be outdated, running the commands below ensures you're using a compatible version:\n\n```\ncd /home/git/gitlab-shell\nsudo -u git -H git fetch\nsudo -u git -H git checkout v`cat /home/git/gitlab/GITLAB_SHELL_VERSION`\n```\n#### One line upgrade command\n\nYou've read through the entire guide and probably already did all the steps one by one.\nBelow is a one line command with step 1 to 5 for the next time you upgrade.\nPlease replace X.X.X with the [latest GitLab release](https://packages.gitlab.com/gitlab/gitlab-ce).\n\n```\ncd /home/git/gitlab; \\\n  sudo -u git -H bundle exec rake gitlab:backup:create RAILS_ENV=production; \\\n  sudo service gitlab stop; \\\n  sudo -u git -H ruby -Ilib -e 'require \"gitlab/upgrader\"' -e 'class Gitlab::Upgrader' -e 'def latest_version_raw' -e '\"vX.X.X\"' -e 'end' -e 'end' -e 'Gitlab::Upgrader.new.execute' -- -y; \\\n  cd /home/git/gitlab-shell; \\\n  sudo -u git -H git fetch; \\\n  sudo -u git -H git checkout v`cat /home/git/gitlab/GITLAB_SHELL_VERSION`; \\\n  cd /home/git/gitlab; \\\n  sudo service gitlab start; \\\n  sudo service nginx restart; \\\n  sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production\n```\n####Note:\n阿里云服务器ruby源不稳定。换国内的源\n\n```\ngem sources --add https://ruby.taobao.org/ --remove https://rubygems.org/\ngem sources -l\n# 请确保只有 ruby.taobao.org\ngem install rails\n```\n\n```\nsudo -u git bundle install\n```\n\n安装完成之后 `update init script`\n\n```\nrm /etc/init.d/gitlab\nsudo cp lib/support/init.d/gitlab /etc/init.d/gitlab\n```\n\n升级是由于是从7.x 到8.x 样式变化很大，所以执行完后样式错乱。后来找了些文档才发现要重新生产asset文件。\n\n```\nsudo -u git -H bundle exec rake assets:clean assets:precompile cache:clear RAILS_ENV=production\n```\n重启\n\n```\nservice gitlab start\nservice nginx restart\n```\nDone!\n\n\n","slug":"gitlab_update_notes","published":1,"updated":"2017-05-31T01:50:56.806Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3ccgw9i00026sv5yt9y4z25","content":"<h1 id=\"Gitlab-升级笔记\"><a href=\"#Gitlab-升级笔记\" class=\"headerlink\" title=\"Gitlab 升级笔记\"></a>Gitlab 升级笔记</h1><blockquote>\n<p>适用于使用源码安装的Gitlab</p>\n<p>GitLab Community Edition 8.3.2 fbb8b6e&gt;</p>\n</blockquote>\n<h4 id=\"0-Backup\"><a href=\"#0-Backup\" class=\"headerlink\" title=\"0. Backup\"></a>0. Backup</h4><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd <span class=\"regexp\">/home/</span>git/gitlab</div><div class=\"line\">sudo -u git -H bundle exec rake <span class=\"string\">gitlab:</span><span class=\"string\">backup:</span>create RAILS_ENV=production</div></pre></td></tr></table></figure>\n<p>备份完成后会在<code>/home/git/gitlab/backup</code>文件夹下生成已时间戳命名的文件<code>1459217332_gitlab_backup.tar</code></p>\n<h4 id=\"1-Stop-server\"><a href=\"#1-Stop-server\" class=\"headerlink\" title=\"1. Stop server\"></a>1. Stop server</h4><figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo service gitlab <span class=\"built_in\">stop</span></div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h4 id=\"2-Run-GitLab-upgrade-tool\"><a href=\"#2-Run-GitLab-upgrade-tool\" class=\"headerlink\" title=\"2.Run GitLab upgrade tool\"></a>2.Run GitLab upgrade tool</h4><p>Please replace X.X.X with the <a href=\"https://packages.gitlab.com/gitlab/gitlab-ce\" target=\"_blank\" rel=\"external\">latest GitLab release</a>.</p>\n<p>GitLab 7.9 adds <code>nodejs</code> as a dependency. GitLab 7.6 adds <code>libkrb5-dev</code> as a dependency (installed by default on Ubuntu and OSX). GitLab 7.2 adds <code>pkg-config</code> and <code>cmake</code> as dependency. Please check the dependencies in the <a href=\"https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/install/installation.md#1-packages-dependencies\" target=\"_blank\" rel=\"external\">installation guide</a>.</p>\n<figure class=\"highlight flix\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /home/git/gitlab</div><div class=\"line\">sudo -u git -H ruby -Ilib -e 'require <span class=\"string\">\"gitlab/upgrader\"</span>' -e '<span class=\"keyword\">class</span> Gitlab::Upgrader' -e '<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">latest_version_raw</span>' <span class=\"title\">-e</span> '\"<span class=\"title\">vX</span>.<span class=\"title\">X</span>.<span class=\"title\">X</span>\"' <span class=\"title\">-e</span> '<span class=\"title\">end</span>' <span class=\"title\">-e</span> '<span class=\"title\">end</span>' <span class=\"title\">-e</span> '<span class=\"title\">Gitlab</span></span>::Upgrader.new.execute'</div><div class=\"line\"></div><div class=\"line\"># to perform a non-interactive install (no user input required) you can add -y</div><div class=\"line\"># sudo -u git -H ruby -Ilib -e 'require <span class=\"string\">\"gitlab/upgrader\"</span>' -e '<span class=\"keyword\">class</span> Gitlab::Upgrader' -e '<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">latest_version_raw</span>' <span class=\"title\">-e</span> '\"<span class=\"title\">vX</span>.<span class=\"title\">X</span>.<span class=\"title\">X</span>\"' <span class=\"title\">-e</span> '<span class=\"title\">end</span>' <span class=\"title\">-e</span> '<span class=\"title\">end</span>' <span class=\"title\">-e</span> '<span class=\"title\">Gitlab</span></span>::Upgrader.new.execute' -- -y</div></pre></td></tr></table></figure>\n<p><em>小插曲：</em>执行命令时报错</p>\n<figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">from /home/git/gitlab/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">gitlab</span>/<span class=\"title\">upgrader</span>.<span class=\"title\">rb</span>:74:<span class=\"title\">in</span> `<span class=\"title\">upgrade</span>'</span></div><div class=\"line\"></div><div class=\"line\">    from /home/git/gitlab/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">gitlab</span>/<span class=\"title\">upgrader</span>.<span class=\"title\">rb</span>:22:<span class=\"title\">in</span> `<span class=\"title\">execute</span>'</span></div><div class=\"line\"></div><div class=\"line\">    from -<span class=\"symbol\">e:</span><span class=\"number\">7</span>:in <span class=\"string\">`&lt;main&gt;'</span></div></pre></td></tr></table></figure>\n<p>解决办法</p>\n<figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Open /home/git/gitlab/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">gitlab</span>/<span class=\"title\">upgrader</span>.<span class=\"title\">rb</span> <span class=\"title\">in</span> <span class=\"title\">editor</span></span></div><div class=\"line\">Replace all <span class=\"comment\">#&#123;Gitlab.config.git.bin_path&#125; by git and save</span></div><div class=\"line\">Run upgrader.rb <span class=\"keyword\">as</span> usual</div></pre></td></tr></table></figure>\n<p>I have the same problem upgrading from 8.5.1 to 8.5.5. Replacing <code>Gitlab.config.git.bin_path</code> with <code>git</code> fixed it.<br>This is the search and replace command to run in vi: <code>%s/#{Gitlab.config.git.bin_path}/git/g</code></p>\n<h4 id=\"3-Start-application\"><a href=\"#3-Start-application\" class=\"headerlink\" title=\"3. Start application\"></a>3. Start application</h4><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo service gitlab <span class=\"literal\">start</span></div><div class=\"line\">sudo service nginx restart</div></pre></td></tr></table></figure>\n<h4 id=\"4-Check-application-status\"><a href=\"#4-Check-application-status\" class=\"headerlink\" title=\"4. Check application status\"></a>4. Check application status</h4><p>Check if GitLab and its dependencies are configured correctly:</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">sudo</span> -u git -H <span class=\"keyword\">bundle </span>exec rake gitlab:check RAILS_ENV<span class=\"symbol\">=production</span></div></pre></td></tr></table></figure>\n<p>If all items are green, then congratulations upgrade is complete!</p>\n<h4 id=\"5-Upgrade-GitLab-Shell\"><a href=\"#5-Upgrade-GitLab-Shell\" class=\"headerlink\" title=\"5. Upgrade GitLab Shell\"></a>5. Upgrade GitLab Shell</h4><p>GitLab Shell might be outdated, running the commands below ensures you’re using a compatible version:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /home/git/gitlab-<span class=\"keyword\">shell</span><span class=\"bash\"></span></div><div class=\"line\">sudo -u git -H git fetch</div><div class=\"line\">sudo -u git -H git checkout v`cat /home/git/gitlab/GITLAB_SHELL_VERSION`</div></pre></td></tr></table></figure>\n<h4 id=\"One-line-upgrade-command\"><a href=\"#One-line-upgrade-command\" class=\"headerlink\" title=\"One line upgrade command\"></a>One line upgrade command</h4><p>You’ve read through the entire guide and probably already did all the steps one by one.<br>Below is a one line command with step 1 to 5 for the next time you upgrade.<br>Please replace X.X.X with the <a href=\"https://packages.gitlab.com/gitlab/gitlab-ce\" target=\"_blank\" rel=\"external\">latest GitLab release</a>.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> /home/git/gitlab; \\</div><div class=\"line\">  sudo -u git -H bundle <span class=\"built_in\">exec</span> rake gitlab:backup:create RAILS_ENV=production; \\</div><div class=\"line\">  sudo service gitlab stop; \\</div><div class=\"line\">  sudo -u git -H ruby -Ilib <span class=\"_\">-e</span> <span class=\"string\">'require \"gitlab/upgrader\"'</span> <span class=\"_\">-e</span> <span class=\"string\">'class Gitlab::Upgrader'</span> <span class=\"_\">-e</span> <span class=\"string\">'def latest_version_raw'</span> <span class=\"_\">-e</span> <span class=\"string\">'\"vX.X.X\"'</span> <span class=\"_\">-e</span> <span class=\"string\">'end'</span> <span class=\"_\">-e</span> <span class=\"string\">'end'</span> <span class=\"_\">-e</span> <span class=\"string\">'Gitlab::Upgrader.new.execute'</span> -- -y; \\</div><div class=\"line\">  <span class=\"built_in\">cd</span> /home/git/gitlab-shell; \\</div><div class=\"line\">  sudo -u git -H git fetch; \\</div><div class=\"line\">  sudo -u git -H git checkout v`cat /home/git/gitlab/GITLAB_SHELL_VERSION`; \\</div><div class=\"line\">  <span class=\"built_in\">cd</span> /home/git/gitlab; \\</div><div class=\"line\">  sudo service gitlab start; \\</div><div class=\"line\">  sudo service nginx restart; \\</div><div class=\"line\">  sudo -u git -H bundle <span class=\"built_in\">exec</span> rake gitlab:check RAILS_ENV=production</div></pre></td></tr></table></figure>\n<p>####Note:<br>阿里云服务器ruby源不稳定。换国内的源</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">gem sources --<span class=\"built_in\">add</span> http<span class=\"variable\">s:</span>//<span class=\"keyword\">ruby</span>.taobao.org/ --<span class=\"built_in\">remove</span> http<span class=\"variable\">s:</span>//rubygems.org/</div><div class=\"line\">gem sources -<span class=\"keyword\">l</span></div><div class=\"line\"># 请确保只有 <span class=\"keyword\">ruby</span>.taobao.org</div><div class=\"line\">gem install rails</div></pre></td></tr></table></figure>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">sudo</span> -u git <span class=\"keyword\">bundle </span>install</div></pre></td></tr></table></figure>\n<p>安装完成之后 <code>update init script</code></p>\n<figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">rm /etc/init.d/gitlab</div><div class=\"line\">sudo cp <span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">support</span>/<span class=\"title\">init</span>.<span class=\"title\">d</span>/<span class=\"title\">gitlab</span> /<span class=\"title\">etc</span>/<span class=\"title\">init</span>.<span class=\"title\">d</span>/<span class=\"title\">gitlab</span></span></div></pre></td></tr></table></figure>\n<p>升级是由于是从7.x 到8.x 样式变化很大，所以执行完后样式错乱。后来找了些文档才发现要重新生产asset文件。</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo -u git -H bundle exec rake <span class=\"string\">assets:</span>clean <span class=\"string\">assets:</span>precompile <span class=\"string\">cache:</span>clear RAILS_ENV=production</div></pre></td></tr></table></figure>\n<p>重启</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">service gitlab <span class=\"literal\">start</span></div><div class=\"line\">service nginx restart</div></pre></td></tr></table></figure>\n<p>Done!</p>\n","site":{"data":{}},"excerpt":"<h1 id=\"Gitlab-升级笔记\"><a href=\"#Gitlab-升级笔记\" class=\"headerlink\" title=\"Gitlab 升级笔记\"></a>Gitlab 升级笔记</h1><blockquote>\n<p>适用于使用源码安装的Gitlab</p>\n<p>GitLab Community Edition 8.3.2 fbb8b6e&gt;</p>\n</blockquote>\n<h4 id=\"0-Backup\"><a href=\"#0-Backup\" class=\"headerlink\" title=\"0. Backup\"></a>0. Backup</h4><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd <span class=\"regexp\">/home/</span>git/gitlab</div><div class=\"line\">sudo -u git -H bundle exec rake <span class=\"string\">gitlab:</span><span class=\"string\">backup:</span>create RAILS_ENV=production</div></pre></td></tr></table></figure>\n<p>备份完成后会在<code>/home/git/gitlab/backup</code>文件夹下生成已时间戳命名的文件<code>1459217332_gitlab_backup.tar</code></p>\n<h4 id=\"1-Stop-server\"><a href=\"#1-Stop-server\" class=\"headerlink\" title=\"1. Stop server\"></a>1. Stop server</h4><figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo service gitlab <span class=\"built_in\">stop</span></div></pre></td></tr></table></figure>","more":"<h4 id=\"2-Run-GitLab-upgrade-tool\"><a href=\"#2-Run-GitLab-upgrade-tool\" class=\"headerlink\" title=\"2.Run GitLab upgrade tool\"></a>2.Run GitLab upgrade tool</h4><p>Please replace X.X.X with the <a href=\"https://packages.gitlab.com/gitlab/gitlab-ce\" target=\"_blank\" rel=\"external\">latest GitLab release</a>.</p>\n<p>GitLab 7.9 adds <code>nodejs</code> as a dependency. GitLab 7.6 adds <code>libkrb5-dev</code> as a dependency (installed by default on Ubuntu and OSX). GitLab 7.2 adds <code>pkg-config</code> and <code>cmake</code> as dependency. Please check the dependencies in the <a href=\"https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/install/installation.md#1-packages-dependencies\" target=\"_blank\" rel=\"external\">installation guide</a>.</p>\n<figure class=\"highlight flix\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /home/git/gitlab</div><div class=\"line\">sudo -u git -H ruby -Ilib -e 'require <span class=\"string\">\"gitlab/upgrader\"</span>' -e '<span class=\"keyword\">class</span> Gitlab::Upgrader' -e '<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">latest_version_raw</span>' <span class=\"title\">-e</span> '\"<span class=\"title\">vX</span>.<span class=\"title\">X</span>.<span class=\"title\">X</span>\"' <span class=\"title\">-e</span> '<span class=\"title\">end</span>' <span class=\"title\">-e</span> '<span class=\"title\">end</span>' <span class=\"title\">-e</span> '<span class=\"title\">Gitlab</span></span>::Upgrader.new.execute'</div><div class=\"line\"></div><div class=\"line\"># to perform a non-interactive install (no user input required) you can add -y</div><div class=\"line\"># sudo -u git -H ruby -Ilib -e 'require <span class=\"string\">\"gitlab/upgrader\"</span>' -e '<span class=\"keyword\">class</span> Gitlab::Upgrader' -e '<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">latest_version_raw</span>' <span class=\"title\">-e</span> '\"<span class=\"title\">vX</span>.<span class=\"title\">X</span>.<span class=\"title\">X</span>\"' <span class=\"title\">-e</span> '<span class=\"title\">end</span>' <span class=\"title\">-e</span> '<span class=\"title\">end</span>' <span class=\"title\">-e</span> '<span class=\"title\">Gitlab</span></span>::Upgrader.new.execute' -- -y</div></pre></td></tr></table></figure>\n<p><em>小插曲：</em>执行命令时报错</p>\n<figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">from /home/git/gitlab/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">gitlab</span>/<span class=\"title\">upgrader</span>.<span class=\"title\">rb</span>:74:<span class=\"title\">in</span> `<span class=\"title\">upgrade</span>'</span></div><div class=\"line\"></div><div class=\"line\">    from /home/git/gitlab/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">gitlab</span>/<span class=\"title\">upgrader</span>.<span class=\"title\">rb</span>:22:<span class=\"title\">in</span> `<span class=\"title\">execute</span>'</span></div><div class=\"line\"></div><div class=\"line\">    from -<span class=\"symbol\">e:</span><span class=\"number\">7</span>:in <span class=\"string\">`&lt;main&gt;'</span></div></pre></td></tr></table></figure>\n<p>解决办法</p>\n<figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Open /home/git/gitlab/<span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">gitlab</span>/<span class=\"title\">upgrader</span>.<span class=\"title\">rb</span> <span class=\"title\">in</span> <span class=\"title\">editor</span></span></div><div class=\"line\">Replace all <span class=\"comment\">#&#123;Gitlab.config.git.bin_path&#125; by git and save</span></div><div class=\"line\">Run upgrader.rb <span class=\"keyword\">as</span> usual</div></pre></td></tr></table></figure>\n<p>I have the same problem upgrading from 8.5.1 to 8.5.5. Replacing <code>Gitlab.config.git.bin_path</code> with <code>git</code> fixed it.<br>This is the search and replace command to run in vi: <code>%s/#{Gitlab.config.git.bin_path}/git/g</code></p>\n<h4 id=\"3-Start-application\"><a href=\"#3-Start-application\" class=\"headerlink\" title=\"3. Start application\"></a>3. Start application</h4><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo service gitlab <span class=\"literal\">start</span></div><div class=\"line\">sudo service nginx restart</div></pre></td></tr></table></figure>\n<h4 id=\"4-Check-application-status\"><a href=\"#4-Check-application-status\" class=\"headerlink\" title=\"4. Check application status\"></a>4. Check application status</h4><p>Check if GitLab and its dependencies are configured correctly:</p>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">sudo</span> -u git -H <span class=\"keyword\">bundle </span>exec rake gitlab:check RAILS_ENV<span class=\"symbol\">=production</span></div></pre></td></tr></table></figure>\n<p>If all items are green, then congratulations upgrade is complete!</p>\n<h4 id=\"5-Upgrade-GitLab-Shell\"><a href=\"#5-Upgrade-GitLab-Shell\" class=\"headerlink\" title=\"5. Upgrade GitLab Shell\"></a>5. Upgrade GitLab Shell</h4><p>GitLab Shell might be outdated, running the commands below ensures you’re using a compatible version:</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">cd /home/git/gitlab-<span class=\"keyword\">shell</span><span class=\"bash\"></span></div><div class=\"line\">sudo -u git -H git fetch</div><div class=\"line\">sudo -u git -H git checkout v`cat /home/git/gitlab/GITLAB_SHELL_VERSION`</div></pre></td></tr></table></figure>\n<h4 id=\"One-line-upgrade-command\"><a href=\"#One-line-upgrade-command\" class=\"headerlink\" title=\"One line upgrade command\"></a>One line upgrade command</h4><p>You’ve read through the entire guide and probably already did all the steps one by one.<br>Below is a one line command with step 1 to 5 for the next time you upgrade.<br>Please replace X.X.X with the <a href=\"https://packages.gitlab.com/gitlab/gitlab-ce\" target=\"_blank\" rel=\"external\">latest GitLab release</a>.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> /home/git/gitlab; \\</div><div class=\"line\">  sudo -u git -H bundle <span class=\"built_in\">exec</span> rake gitlab:backup:create RAILS_ENV=production; \\</div><div class=\"line\">  sudo service gitlab stop; \\</div><div class=\"line\">  sudo -u git -H ruby -Ilib <span class=\"_\">-e</span> <span class=\"string\">'require \"gitlab/upgrader\"'</span> <span class=\"_\">-e</span> <span class=\"string\">'class Gitlab::Upgrader'</span> <span class=\"_\">-e</span> <span class=\"string\">'def latest_version_raw'</span> <span class=\"_\">-e</span> <span class=\"string\">'\"vX.X.X\"'</span> <span class=\"_\">-e</span> <span class=\"string\">'end'</span> <span class=\"_\">-e</span> <span class=\"string\">'end'</span> <span class=\"_\">-e</span> <span class=\"string\">'Gitlab::Upgrader.new.execute'</span> -- -y; \\</div><div class=\"line\">  <span class=\"built_in\">cd</span> /home/git/gitlab-shell; \\</div><div class=\"line\">  sudo -u git -H git fetch; \\</div><div class=\"line\">  sudo -u git -H git checkout v`cat /home/git/gitlab/GITLAB_SHELL_VERSION`; \\</div><div class=\"line\">  <span class=\"built_in\">cd</span> /home/git/gitlab; \\</div><div class=\"line\">  sudo service gitlab start; \\</div><div class=\"line\">  sudo service nginx restart; \\</div><div class=\"line\">  sudo -u git -H bundle <span class=\"built_in\">exec</span> rake gitlab:check RAILS_ENV=production</div></pre></td></tr></table></figure>\n<p>####Note:<br>阿里云服务器ruby源不稳定。换国内的源</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">gem sources --<span class=\"built_in\">add</span> http<span class=\"variable\">s:</span>//<span class=\"keyword\">ruby</span>.taobao.org/ --<span class=\"built_in\">remove</span> http<span class=\"variable\">s:</span>//rubygems.org/</div><div class=\"line\">gem sources -<span class=\"keyword\">l</span></div><div class=\"line\"># 请确保只有 <span class=\"keyword\">ruby</span>.taobao.org</div><div class=\"line\">gem install rails</div></pre></td></tr></table></figure>\n<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">sudo</span> -u git <span class=\"keyword\">bundle </span>install</div></pre></td></tr></table></figure>\n<p>安装完成之后 <code>update init script</code></p>\n<figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">rm /etc/init.d/gitlab</div><div class=\"line\">sudo cp <span class=\"class\"><span class=\"keyword\">lib</span>/<span class=\"title\">support</span>/<span class=\"title\">init</span>.<span class=\"title\">d</span>/<span class=\"title\">gitlab</span> /<span class=\"title\">etc</span>/<span class=\"title\">init</span>.<span class=\"title\">d</span>/<span class=\"title\">gitlab</span></span></div></pre></td></tr></table></figure>\n<p>升级是由于是从7.x 到8.x 样式变化很大，所以执行完后样式错乱。后来找了些文档才发现要重新生产asset文件。</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo -u git -H bundle exec rake <span class=\"string\">assets:</span>clean <span class=\"string\">assets:</span>precompile <span class=\"string\">cache:</span>clear RAILS_ENV=production</div></pre></td></tr></table></figure>\n<p>重启</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">service gitlab <span class=\"literal\">start</span></div><div class=\"line\">service nginx restart</div></pre></td></tr></table></figure>\n<p>Done!</p>"}],"PostAsset":[],"PostCategory":[{"post_id":"cj3ccgw9700006sv5lh2qwuyq","category_id":"cj3ccgw9w00046sv5g4cg5rze","_id":"cj3ccgwac00096sv59tuaku2n"},{"post_id":"cj3ccgw9i00026sv5yt9y4z25","category_id":"cj3ccgw9w00046sv5g4cg5rze","_id":"cj3ccgwaf000b6sv5kj8wrr9g"}],"PostTag":[{"post_id":"cj3ccgw9700006sv5lh2qwuyq","tag_id":"cj3ccgwa300056sv59fc3ydxc","_id":"cj3ccgwah000e6sv5pzgyckcl"},{"post_id":"cj3ccgw9700006sv5lh2qwuyq","tag_id":"cj3ccgwaa00086sv5m706wd9t","_id":"cj3ccgwah000f6sv5u7g6lc1p"},{"post_id":"cj3ccgw9700006sv5lh2qwuyq","tag_id":"cj3ccgwac000a6sv5uhqjd543","_id":"cj3ccgwah000g6sv5cg4qmq01"},{"post_id":"cj3ccgw9700006sv5lh2qwuyq","tag_id":"cj3ccgwaf000c6sv5jb57xvpr","_id":"cj3ccgwai000h6sv5uoildsan"},{"post_id":"cj3ccgw9i00026sv5yt9y4z25","tag_id":"cj3ccgwaf000d6sv551lmutm0","_id":"cj3ccgwal000i6sv5ocwgzkdm"}],"Tag":[{"name":"Fuck GFW","_id":"cj3ccgwa300056sv59fc3ydxc"},{"name":"shadowsocks","_id":"cj3ccgwaa00086sv5m706wd9t"},{"name":"openwrt","_id":"cj3ccgwac000a6sv5uhqjd543"},{"name":"pandorabox","_id":"cj3ccgwaf000c6sv5jb57xvpr"},{"name":"Gitlab","_id":"cj3ccgwaf000d6sv551lmutm0"}]}}